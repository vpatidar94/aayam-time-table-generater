{"version":3,"sources":["pages/TTPages/List/List.js","pages/TTPages/NewTT/NewTT.js"],"names":["teachers_list","batch","time","NewTT","_useState","useState","_useState2","_slicedToArray","apiData","setApiData","_useState3","_useState4","tableWidth","setTableWidth","_useState5","_useState6","draggedCellKey","setDraggedCellKey","_useState7","_useState8","duplicateElements","setDuplicateElements","_useState9","_useState10","duplicateDetected","setDuplicateDetected","_useState11","_useState12","setTeacher","_useState13","_useState14","teacherCounter","setTeacherCounter","_useState15","_useState16","teacherAssignment","setTeacherAssignment","_useState17","_useState18","image","setImage","useEffect","callApi","console","log","saved","localStorage","getItem","data","JSON","parse","divRef","useRef","fetch","method","redirect","then","response","json","result","catch","error","_apiData$Object","Object","responseObject","_responseObject$Batch","Batch","_responseObject$Facul","FacultyList","dragItem","tableElement","document","querySelector","offsetWidth","alert","setTimeout","handleDrop","e","key","_objectSpread2","sourceAssignment","targetAssignment","_objectSpread","_defineProperty","teacher_assignment","current","teacherCount","teacher","rowId","split","teacherInCurrentRow","cellKey","startsWith","push","duplicates","reduce","acc","item","newDuplicateKeys","values","filter","keys","length","flat","includes","checkForDuplicateInRow","allowDrop","ev","t","target","classList","contains","parentNode","innerText","trim","preventDefault","_jsxs","_Fragment","children","_jsx","onClick","className","ref","map","BatchID","classtime","b","_teacherAssignment$ke","_teacherAssignment$ke2","_teacherAssignment$ke3","_teacherAssignment$ke4","id","draggable","onDragOver","onDrop","onDragStart","handleTableCellDragStart","concat","removeTeacher","RxCross2","html2canvas","canvas","imgData","toDataURL","src","alt","style","maxWidth","index","name","bgColor","teacherInfo","Faculty"],"mappings":"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","file":"static/js/11.e4014a76.chunk.js","sourcesContent":["import {v4 as uuidv4} from \"uuid\"\n\n\n\n// export const teachers_list = [\n// {name:'MYK',\n// className:\"style-faculty\",\n// bgColor:\"bg-myk\",\n// bg:\"blue\"\n// },\n\n// {name:'KPS',\n// className:\"style-faculty\",\n// bgColor:\"bg-kps\"\n// },\n\n// {name:'MRS',\n// className:\"style-faculty\",\n// bgColor:\"bg-mrs\"\n// },\n\n// {name:'MAS',\n// className:\"style-faculty\",\n// bgColor:\"bg-mas\"\n// },\n\n// {name:'RSS',\n// className:\"style-faculty\",\n// bgColor:\"bg-rss\"\n// },\n\n// {name:'NMS',\n// className:\"style-faculty\",\n// bgColor:\"bg-nms\"\n// },\n\n// {name:'HDS',\n// className:\"style-faculty\",\n// bgColor:\"bg-hds\"\n// },\n\n// {name:'MNM',\n// className:\"style-faculty\",\n// bgColor:\"bg-mnm\"\n// },\n\n// {name:'SJ',\n// className:\"style-faculty\",\n// bgColor:\"bg-sj\"},\n\n// {name:'AJ',\n// className:\"style-faculty\",\n// bgColor:\"bg-aj\"\n// },\n\n// {name:'DMPS',\n// className:\"style-faculty\",\n// bgColor:\"bg-dmps\"\n// },\n\n// {name:'PSJ',\n// className:\"style-faculty\",\n// bgColor:\"bg-psj\"\n// },\n\n// {name:'YBS',\n// className:\"style-faculty\",\n// bgColor:\"bg-ybs\"\n// },\n\n// {name:'AKS',\n// className:\"style-faculty\",\n// bgColor:\"bg-aks\"},\n\n// {name:'AMS',\n// className:\"style-faculty\",\n// bgColor:\"bg-ams\"},\n\n\n\n// ]; \n\n\n\nexport const teachers_list = [\n        {\n            \"FacultyID\": 1,\n            \"Faculty\": \"MYK\",\n            \"subject\": \"Physics\"\n        },\n        \n        {\n            \"FacultyID\": 2,\n            \"Faculty\": \"KPS\",\n            \"subject\":\"Chemistry\"\n        },\n\n        {\n            \"FacultyID\": 3,\n            \"Faculty\": \"MRS\",\n            \"subject\":\"Chemistry\"\n        },\n\n        {\n            \"FacultyID\": 4,\n            \"Faculty\": \"MAS\",\n            \"subject\":\"Physics\"\n        },\n\n        {\n            \"FacultyID\": 5,\n            \"Faculty\": \"RSS\",\n            \"subject\":\"Physics\"\n        },\n        {\n            \"FacultyID\": 6,\n            \"Faculty\": \"NMS\",\n            \"subject\":\"Biology\"\n        },\n        {\n            \"FacultyID\": 7,\n            \"Faculty\": \"HDS\",\n            \"subject\":\"Chemistry\"\n        },\n        {\n            \"FacultyID\": 8,\n            \"Faculty\": \"MNM\",\n            \"subject\": \"Biology\"\n        },\n        \n        {\n            \"FacultyID\": 9,\n            \"Faculty\": \"SJ\",\n            \"subject\":\"Biology\"\n        },\n\n        {\n            \"FacultyID\": 10,\n            \"Faculty\": \"AJ\",\n            \"subject\":\"Biology\"\n        },\n\n        {\n            \"FacultyID\": 11,\n            \"Faculty\": \"DMPS\",\n            \"subject\":\"Chemistry\"\n        },\n\n        \n       \n        \n        {\n            \"FacultyID\": 12,\n            \"Faculty\": \"PSJ\",\n            \"subject\":\"Physics\"\n        },\n        {\n            \"FacultyID\": 13,\n            \"Faculty\": \"YBS\",\n            \"subject\":\"Biology\"\n        },\n        {\n            \"FacultyID\": 14,\n            \"Faculty\": \"AKS\",\n            \"subject\":\"Chemistry\"\n        },\n        {\n            \"FacultyID\": 15,\n            \"Faculty\": \"AMS\",\n            \"subject\":\"Maths\"\n        },\n        {\n            \"FacultyID\": 16,\n            \"Faculty\": \"NDS\",\n            \"subject\":\"Physics\"\n        },\n        {\n            \"FacultyID\": 17,\n            \"Faculty\": \"HWS\",\n            \"subject\":\"Physics\"\n        },\n        {\n            \"FacultyID\": 18,\n            \"Faculty\": \"JRS\",\n            \"subject\":\"Chemistry\"\n        },\n        {\n            \"FacultyID\": 19,\n            \"Faculty\": \"HTS\",\n            \"subject\":\"Chemistry\"\n        },\n    ]; \n    \n\n\n// PREVIOUS BATACH LIST\n// export const batch = [\n//     {id:uuidv4(),\n//     batchname:'A1'},\n//     {id:uuidv4(),\n//     batchname:'A2'},\n//     {id:uuidv4(), \n//     batchname:'CRASH E'},\n//     {id:uuidv4() ,\n//     batchname:'CRASH H'},\n//     {id:uuidv4(),\n//     batchname:'ONLINE'},\n//     {id:uuidv4(),\n//     batchname:'A14'},\n//     {id:uuidv4(),\n//     batchname:'JEE EX'},\n//     {id:uuidv4(),\n//     batchname:'JEE12'},\n    \n// ];\n\n\nexport const batch= [\n    {\n        \"BatchID\": 1,\n        \"Batch\": \"A1\",\n        \"CourseID\": 1\n    },\n    {\n        \"BatchID\": 2,\n        \"Batch\": \"A2\",\n        \"CourseID\": 2\n    },\n    {\n        \"BatchID\": 3,\n        \"Batch\": \"A3\",\n        \"CourseID\": 3\n    },\n    {\n        \"BatchID\": 4,\n        \"Batch\": \"A4\",\n        \"CourseID\": 4\n    },\n    {\n        \"BatchID\": 5,\n        \"Batch\": \"C1\",\n        \"CourseID\": 5\n    },\n    {\n        \"BatchID\": 6,\n        \"Batch\": \"C2\",\n        \"CourseID\": 6\n    },\n    {\n        \"BatchID\": 7,\n        \"Batch\": \"B1\",\n        \"CourseID\": 7\n    },\n    {\n        \"BatchID\": 8,\n        \"Batch\": \"B2\",\n        \"CourseID\": 8\n    },\n    //MORE BATCHES ADDED WITH A FAKE BATCHID AND FAKE COURSEID NEED TO CHANGE LATER\n\n    {\n        \"BatchID\": 9,\n        \"Batch\": \"JO1\",\n        \"CourseID\": 9\n    },\n    {\n        \"BatchID\": 10,\n        \"Batch\": \"JXI-1\",\n        \"CourseID\": 10\n    },\n    {\n        \"BatchID\": 11,\n        \"Batch\": \"JXI-2\",\n        \"CourseID\": 11\n    },\n    {\n        \"BatchID\": 12,\n        \"Batch\": \"JXII-1\",\n        \"CourseID\": 12\n    },\n    {\n        \"BatchID\": 13,\n        \"Batch\": \"JEXL\",\n        \"CourseID\": 13\n    },\n    {\n        \"BatchID\": 14,\n        \"Batch\": \"JEE Adv\",\n        \"CourseID\": 14\n    }\n]\n\n\n\nexport const time= [\n    {\n        \"LectureID\": 1,\n        \"Lecture\": \"L1\",\n        \"Time_From\": \"08:30 AM\",\n        \"Time_To\": \"09:45 AM\"\n    },\n    {\n        \"LectureID\": 2,\n        \"Lecture\": \"L2\",\n        \"Time_From\": \"09:50 AM\",\n        \"Time_To\": \"11:05 AM\"\n    },\n    {\n        \"LectureID\": 3,\n        \"Lecture\": \"L3\",\n        \"Time_From\": \"11:20 AM\",\n        \"Time_To\": \"12:35 PM\"\n    },\n    {\n        \"LectureID\": 4,\n        \"Lecture\": \"L4\",\n        \"Time_From\": \"12:40 PM\",\n        \"Time_To\": \"01:55 PM\"\n    },\n    {\n        \"LectureID\": 5,\n        \"Lecture\": \"L5\",\n        \"Time_From\": \"02:00 PM\",\n        \"Time_To\": \"03:15 PM\"\n    },\n    {\n        \"LectureID\": 6,\n        \"Lecture\": \"L6\",\n        \"Time_From\": \"03:20 PM\",\n        \"Time_To\": \"04:35 PM\"\n    },\n    {\n        \"LectureID\": 7,\n        \"Lecture\": \"L7\",\n        \"Time_From\": \"04:50 PM\",\n        \"Time_To\": \"06:05 PM\"\n    },\n    {\n        \"LectureID\": 8,\n        \"Lecture\": \"L8\",\n        \"Time_From\": \"06:15 PM\",\n        \"Time_To\": \"07:30 PM\"\n    }\n]\n\n\n\n//PREVIOUS TIME LIST\n\n// export const time = [\n//     {id:uuidv4(),\n//     classtime:'08:30-09:45 AM'},\n//     {id:uuidv4(),\n//     classtime:'09:50-11:05 AM'},\n//     {id:uuidv4(),\n//     classtime: '11:20-12:35 PM'},\n//     {id:uuidv4(),\n//     classtime:'12:40-01:55 PM'},\n//     {id:uuidv4(),\n//     classtime:'02:00-03:15 PM'},\n//     {id:uuidv4(),\n//     classtime:'03:20-04:35 PM'},\n//     {id:uuidv4(),\n//     classtime:'04:50-06:05 PM'},\n//     {id:uuidv4(),\n//     classtime:'06:15-07:30 PM'}];\n\n    ","\nimport React, { useEffect, useRef, useState } from 'react';\nimport { batch, teachers_list, time } from '../List/List';\nimport { RxCross2 } from \"react-icons/rx\";\n// import { RiDeleteBin2Line } from \"react-icons/ri\";\n// import htmlToCanvas from 'html-to-canvas';\nimport \"./NewTT.css\";\nimport html2canvas from 'html2canvas';\n\n\n\nconst NewTT = () => {\n\nconst [apiData, setApiData] = useState({});\n\n  \n\n\n  const [tableWidth, setTableWidth] = useState(0);\n  const [draggedCellKey, setDraggedCellKey] = useState(null);\n  const [duplicateElements, setDuplicateElements] = useState({});\n  const [duplicateDetected, setDuplicateDetected] = useState(false);\n  const [teacher, setTeacher] = useState({});\n  const [teacherCounter, setTeacherCounter] = useState({}); // key: teacherId, value: counter\n  const [teacherAssignment, setTeacherAssignment] = useState({});\n\n  // const [teacherAssignment, setTeacherAssignment] = useState(() => {\n  //   const saved = localStorage.getItem(\"teacherAssignment\");\n  //   const data = saved ? JSON.parse(saved) : {};\n  \n  //   console.log(\"Loaded teacherAssignment:\", data\n  //   return data;\n  // });\n  \n  // const [teacherCounter, setTeacherCounter] = useState(() => {\n  //   const saved = localStorage.getItem(\"teacherCounter\");\n  //   const data = saved ? JSON.parse(saved) : {};\n  //   console.log(\"Loaded teacherCounter:\", data);\n  //   return data;\n  // });\n  \n  \n  \n  \n  \n  const [image, setImage] = useState(null);   //  for div to image conversion\n\n  useEffect(() => {\n    callApi();\n  }, []);\n\n  useEffect(() => {\n    console.log(\"Saving teacherAssignment:\", teacherAssignment);\n    console.log(\"Saving teacherCounter:\", teacherCounter);\n    const saved = localStorage.getItem(\"teacherAssignment\");\n    const data = saved ? JSON.parse(saved) : {};\n    setTeacherAssignment(data);\n    console.log(teacherAssignment);\n    // localStorage.setItem(\"teacherAssignment\", JSON.stringify(teacherAssignment));\n    // localStorage.setItem(\"teacherCounter\", JSON.stringify(teacherCounter));\n  }, []);\n  \n  \n\n\n\n  const divRef = useRef(null);\n\n  const callApi=()=>{\n  // var requestOptions = {\n  //   method: 'GET',\n  //   redirect: 'follow'\n  // };\n  \n  // fetch(\"http://api.hexaloop.in//api/GetMasterData\", requestOptions)\n  // .then(response => response.json())\n  // .then(result => setApiData(result))\n  // .catch(error => console.log('error', error));\n    \n  // }\n  var requestOptions = {\n    method: 'GET',\n    redirect: 'follow'\n  };\n  \n  fetch(\"https://api.aayamcareerinstitute.co.in/api/GetMasterData\", requestOptions)\n  .then(response => response.json())\n  .then(result => setApiData(result))\n  .catch(error => console.log('error', error));\n    \n  }\n\n\n  const { Object: responseObject = {} } = apiData;\n  const { Batch = [],FacultyList=[] } = responseObject;\n\n  \n\n  const convertToImage = () => {\n    html2canvas(divRef.current).then(canvas => {\n      const imgData = canvas.toDataURL();\n      setImage(imgData);\n    }).catch(error => {\n      console.error(error);\n    });\n  };             // for div to image conversion\n\n  \n  \n  \n  \n  const dragItem = useRef();\n  // const dragOverItem = useRef();\n  // const ref=useRef();\n\n  // const dragStart = (e, position) => {\n  //   dragItem.current = position;\n  //   // console.log(e.target.innerHTML);\n  // };\n  \n  const dragStart = (e, teacherInfo) => {\n    dragItem.current = teacherInfo;\n  };\n\n  // const dragEnter = (e, position, teacherDragged, className) => {\n  //   if (!teacher || !teacher.teacher) {\n  //     setTeacher({teacher: teacherDragged, className});\n  //   }\n  // };\n\n  const handleTableCellDragStart = (e, key) => {\n    setDraggedCellKey(key);\n  };\n\n\n  const checkForDuplicateInRow = (key) => {\n    const rowId = key.split('_')[0];\n    const teacherInCurrentRow = [];\n  \n    for (const cellKey in teacherAssignment) {\n      if (cellKey.startsWith(rowId)) {\n        teacherInCurrentRow.push({\n          key: cellKey,\n          teacher: teacherAssignment[cellKey].teacher,\n        });\n      }\n    }\n  \n    const duplicates = teacherInCurrentRow.reduce((acc, item) => {\n      if (acc[item.teacher]) {\n        acc[item.teacher].push(item.key);\n      } else {\n        acc[item.teacher] = [item.key];\n      }\n      return acc;\n    }, {});\n  \n    const newDuplicateKeys = Object.values(duplicates)\n      .filter((keys) => keys.length > 1)\n      .flat();\n  \n    const oldDuplicateKeys = Object.keys(duplicateElements);\n  \n    const isNewDuplicate = !oldDuplicateKeys.includes(key) && newDuplicateKeys.includes(key);\n  \n    if (isNewDuplicate) {\n      setDuplicateDetected(true);\n      setDuplicateElements(\n        newDuplicateKeys.reduce((acc, key) => {\n          acc[key] = true;\n          return acc;\n        }, {})\n      );\n    }\n  };\n\n\n  useEffect(() => {\n    const tableElement = document.querySelector('.table-style');\n    if (tableElement) {\n      const tableWidth = tableElement.offsetWidth;\n      setTableWidth(tableWidth);\n    }\n  }, []);\n\n  useEffect(() => {                                           \n    if (duplicateDetected) {\n      alert('Two same teachers found in the same row');\n      setDuplicateDetected(false);\n      setTimeout(() => {\n        setDuplicateElements({});\n      }, 3000); // Blink duration\n    }\n    }, [duplicateDetected]);                                   \n\n\n  \n    const handleDrop = (e, key) => {\n      if (draggedCellKey) {\n        // Move table item\n        const sourceAssignment = teacherAssignment[draggedCellKey];\n        const targetAssignment = teacherAssignment[key];\n    \n        setTeacherAssignment({\n          ...teacherAssignment,\n          [draggedCellKey]: targetAssignment,\n          [key]: sourceAssignment,\n        });\n    \n        setDraggedCellKey(null);\n      } else {\n        // Assign teacher to the cell\n        const teacher_assignment = { ...teacherAssignment };\n        teacher_assignment[key] = dragItem.current;\n        setTeacherAssignment(teacher_assignment);\n    \n        setTeacher({});\n    \n        const teacherCount = { ...teacherCounter };\n        if (!teacherCount[dragItem.current.teacher]) {\n          teacherCount[dragItem.current.teacher] = 1;\n        } else {\n          teacherCount[dragItem.current.teacher] += 1;\n        }\n        setTeacherCounter(teacherCount);\n    \n        checkForDuplicateInRow(key);\n        \n      }\n    };\n    \n    \n\n    useEffect(() => {\n      if (duplicateDetected) {\n        // alert('Two same teachers found in the same row');   \n        setDuplicateDetected(false);\n      }\n    }, [duplicateDetected]);\n\n    const allowDrop = (ev) => {\n      let t = ev.target;\n      while (t && (!t.classList || !t.classList.contains(\"each-block\"))) {\n        t = t.parentNode;\n      }\n      if (t && t.innerText.trim() !== \"\" ) {\n        // Prevent drop event if cell is not empty\n        return false;\n      }\n      ev.preventDefault();\n    };\n\n  \n  \n    const removeTeacher = (key) => {\n      const teacher_assignment = { ...teacherAssignment };\n      const teacherCount = { ...teacherCounter };\n    \n      if (teacherCount[teacherAssignment[key].teacher]) {\n        teacherCount[teacherAssignment[key].teacher] -= 1;\n      }\n    \n      delete teacher_assignment[key];\n    \n      setTeacherAssignment(teacher_assignment);\n      setTeacher({});\n      setTeacherCounter(teacherCount);\n    };\n    \n        \n  \n    return (\n      <>\n      <button onClick={callApi}>Call</button>\n      {/* <div>\n      <ul>\n        {Batch.map((batch) => (\n          <li key={batch.BatchID}>{batch.Batch}</li>\n        ))}\n      </ul>\n    </div> */}\n      <div className=\"bg-container\">\n      \n       <h1 className='heading-style'>CLASS SCHEDULE</h1>\n      <div>\n       <div ref={divRef}>\n       <table className='table-style'>\n  <tbody>\n    <tr>\n      <td className='F-style time-style'>Time</td>\n      {/* {batch.map((each) => {\n        return (\n          <td className='F-style batch-style'>{each.batchname}</td>\n        )\n      })} */}\n\n      {Batch.map((batch) => {\n        return(\n          <td className='F-style batch-style' key={batch.BatchID}>{batch.Batch}</td>\n        )})}\n    </tr>\n    {time.map((t) => {\n      return (\n        <tr>\n          <td className='F-style time-style'>{t.classtime}</td>\n          {/* {batch.map((b) => { */}\n          {Batch.map((b) => {\n\n            const key = t.id + '_' + b.id\n            return (\n              <td\n                draggable={true}\n                onDragOver={allowDrop}\n                onDrop={(e) => handleDrop(e, key)}\n                onDragStart={(e) => teacherAssignment[key] && handleTableCellDragStart(e, key)}\n                key={key}\n                id={key}\n                className={`each-block ${duplicateElements[key] ? \"blink\" : \"\"} ${teacherAssignment[key]?.className}`}\n              >\n                {teacherAssignment[key] && (\n                  <div className={`teacname-cross-style ${teacherAssignment[key]?.className} `}>\n                    <div className=\"teacher-name\">\n                      {teacherAssignment[key]?.teacher}\n                    </div>\n                    <div className=\"cross-btn-container\">\n                      {teacherAssignment[key]?.teacher ? (\n                        <button\n                          className=\"cross-style\"\n                          onClick={() => removeTeacher(key)}\n                        >\n                          <RxCross2 />\n                        </button>\n                      ) : (\n                        ''\n                      )}\n                    </div>\n                  </div>\n                )}\n              </td>\n            )\n          })}\n        </tr>\n      )\n    })}\n  </tbody>\n</table>\n\n       </div>\n       <button onClick={convertToImage}>Convert to Image</button>\n      {image && <img src={image} alt=\"table\" style={{ maxWidth: tableWidth}}/>}\n      \n    </div>\n    \n\n        <div className='teacher-container'style={{ maxWidth: tableWidth}}>\n          {/* {teachers_list.map((teacher, index) => {\n          const { name, bgColor, className } = teacher;\n          return (\n            <div\n  style={{ maxWidth: tableWidth }}\n  key={name}\n  className={`teacher-item  ${bgColor} ${className}`}\n  draggable={true}\n  onDragStart={(e) => dragStart(e, { teacher: name, className: bgColor })}\n>\n  <h3>{name}</h3>\n  {teacherCounter[name] > 0 && (\n    <span className={`counter-item ${bgColor}`} draggable={false}>\n      {teacherCounter[name]}\n    </span>\n  )}\n</div>            ); */}\n\n\n\n{FacultyList.map((teacher, index) => {\n          const { name, bgColor, className } = teacher;\n          return (\n            <div\n  style={{ maxWidth: tableWidth }}\n  key={name}\n  className={`teacher-item  ${bgColor} ${className}`}\n  draggable={true}\n  onDragStart={(e) => dragStart(e, { teacher: name, className: bgColor })}\n>\n  <h3>{teacher.Faculty}</h3>\n  {teacherCounter[name] > 0 && (\n    <span className={`counter-item ${bgColor}`} draggable={false}>\n      {teacherCounter[name]}\n    </span>\n  )}\n</div>            );\n          })}\n        </div>\n      </div>\n  </>\n  )\n  }\n\n  \n  \n\nexport default NewTT;\n"],"sourceRoot":""}