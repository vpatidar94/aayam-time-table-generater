(this["webpackJsonpstarter-bt5"]=this["webpackJsonpstarter-bt5"]||[]).push([[8],{50:function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r})),c.d(t,"c",(function(){return n}));c(53);var a=[{FacultyID:1,Faculty:"MYK",subject:"Physics"},{FacultyID:2,Faculty:"KPS",subject:"Chemistry"},{FacultyID:3,Faculty:"MRS",subject:"Chemistry"},{FacultyID:4,Faculty:"MAS",subject:"Physics"},{FacultyID:5,Faculty:"RSS",subject:"Physics"},{FacultyID:6,Faculty:"NMS",subject:"Biology"},{FacultyID:7,Faculty:"HDS",subject:"Chemistry"},{FacultyID:8,Faculty:"MNM",subject:"Biology"},{FacultyID:9,Faculty:"SJ",subject:"Biology"},{FacultyID:10,Faculty:"AJ",subject:"Biology"},{FacultyID:11,Faculty:"DMPS",subject:"Chemistry"},{FacultyID:12,Faculty:"PSJ",subject:"Physics"},{FacultyID:13,Faculty:"YBS",subject:"Biology"},{FacultyID:14,Faculty:"AKS",subject:"Chemistry"},{FacultyID:15,Faculty:"AMS",subject:"Maths"},{FacultyID:16,Faculty:"NDS",subject:"Physics"},{FacultyID:17,Faculty:"HWS",subject:"Physics"},{FacultyID:18,Faculty:"JRS",subject:"Chemistry"},{FacultyID:19,Faculty:"HTS",subject:"Chemistry"}],r=[{BatchID:1,Batch:"A1",CourseID:1},{BatchID:2,Batch:"A2",CourseID:2},{BatchID:3,Batch:"A3",CourseID:3},{BatchID:4,Batch:"A4",CourseID:4},{BatchID:5,Batch:"C1",CourseID:5},{BatchID:6,Batch:"C2",CourseID:6},{BatchID:7,Batch:"B1",CourseID:7},{BatchID:8,Batch:"B2",CourseID:8},{BatchID:9,Batch:"JO1",CourseID:9},{BatchID:10,Batch:"JXI-1",CourseID:10},{BatchID:11,Batch:"JXI-2",CourseID:11},{BatchID:12,Batch:"JXII-1",CourseID:12},{BatchID:13,Batch:"JEXL",CourseID:13},{BatchID:14,Batch:"JEE Adv",CourseID:14}],n=[{LectureID:1,Lecture:"L1",Time_From:"08:30 AM",Time_To:"09:45 AM"},{LectureID:2,Lecture:"L2",Time_From:"09:50 AM",Time_To:"11:05 AM"},{LectureID:3,Lecture:"L3",Time_From:"11:20 AM",Time_To:"12:35 PM"},{LectureID:4,Lecture:"L4",Time_From:"12:40 PM",Time_To:"01:55 PM"},{LectureID:5,Lecture:"L5",Time_From:"02:00 PM",Time_To:"03:15 PM"},{LectureID:6,Lecture:"L6",Time_From:"03:20 PM",Time_To:"04:35 PM"},{LectureID:7,Lecture:"L7",Time_From:"04:50 PM",Time_To:"06:05 PM"},{LectureID:8,Lecture:"L8",Time_From:"06:15 PM",Time_To:"07:30 PM"}]},57:function(e,t,c){"use strict";c.r(t);var a=c(8),r=c(52),n=c(7),s=c(1),i=c(50),o=c(6);t.default=function(){console.log(",,bb",i.a);var e=Object(s.useState)(i.a),t=Object(n.a)(e,2),c=t[0],u=t[1],l=Object(s.useState)({}),h=Object(n.a)(l,2),b=h[0],j=h[1],d=Object(s.useState)({}),f=Object(n.a)(d,2),p=f[0],m=f[1],O=function(e){var t=e.target,c=t.name,n=t.checked;m(Object(r.a)(Object(r.a)({},p),{},Object(a.a)({},c,n)))},D=b.Object,y=(void 0===D?{}:D).Batch,x=void 0===y?[]:y;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Add New Batch"}),Object(o.jsx)("button",{onClick:function(){fetch("https://api.aayamcareerinstitute.co.in/api/GetMasterData",{method:"GET",redirect:"follow"}).then((function(e){return e.json()})).then((function(e){return j(e)})).catch((function(e){return console.log("error",e)}))},children:"call it"}),Object(o.jsx)("h2",{children:"Batch List with Checkboxes"}),Object(o.jsx)("ul",{style:{listStyle:"none"},children:x.map((function(e){return Object(o.jsx)("li",{children:Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{type:"checkbox",name:e.BatchID,checked:p[e.BatchID]||!1,onChange:O}),e.Batch]})},e.BatchID)}))}),Object(o.jsx)("button",{onClick:function(){var e=i.a,t=function(t){if(p[t]){var c=x.find((function(e){return e.BatchID===parseInt(t)}));c&&!e.find((function(e){return e.BatchID===c.BatchID}))&&e.push({BatchID:c.BatchID,Batch:c.Batch,CourseID:c.CourseID})}};for(var c in p)t(c);console.log(e),u(e)},children:"Add selected items to batch"}),Object(o.jsx)("h2",{children:"Updated Batch List"}),Object(o.jsx)("ul",{children:c.map((function(e){return Object(o.jsxs)("li",{children:[e.BatchID," - ",e.Batch," - ",e.CourseID]},e.BatchID)}))})]})}},70:function(e,t,c){},91:function(e,t,c){"use strict";c.r(t);var a=c(10),r=c(8),n=c(52),s=c(5),i=c(9),o=c(7),u=c(1),l=c(66),h=c(50),b=(c(70),c(65)),j=c.n(b),d=c(29),f=(c(57),c(17)),p=c(16),m="https://api.aayamcareerinstitute.co.in/api",O={UPLOAD_FILE:m+"/UploadFilesAttachment",GET_UPLOAD_FILE_URL:m+"/GetFiles"},D=Object(f.a)((function e(){Object(p.a)(this,e),this.getWattsappApi=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,c,a,r){var n,i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("url",t),console.log("mesage",c),console.log("cel",a),console.log("file",r),e.next=7,fetch("https://ziper.io/api/send.php?"+new URLSearchParams({number:a,type:"media",message:c,media_url:"https://api.aayamcareerinstitute.co.in/"+t,filename:r,instance_id:"6453479F141A2",access_token:"0a3e27126c2c239bdf7f9128943ef9c0"}),{method:"GET"});case 7:return n=e.sent,e.next=10,n.json();case 10:return i=e.sent,e.abrupt("return",i);case 14:throw e.prev=14,e.t0=e.catch(0),new Error(e.t0.message,e.t0.options);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c,a,r){return e.apply(this,arguments)}}(),this.getWattsappGroupApi=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,c,a){var r,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("url",t),console.log("mesage",c),console.log("file",a),e.next=6,fetch("https://ziper.io/api/sendgroupmsg.php?"+new URLSearchParams({group_id:"",type:"media",message:c,media_url:"https://api.aayamcareerinstitute.co.in/"+t,filename:a,instance_id:"6453479F141A2",access_token:"0a3e27126c2c239bdf7f9128943ef9c0"}),{method:"GET"});case 6:return r=e.sent,e.next=9,r.json();case 9:return n=e.sent,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(0),new Error(e.t0.message,e.t0.options);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,c,a){return e.apply(this,arguments)}}(),this.uplaodFile=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var c,a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(c=new FormData).append("file",t,t.name),e.next=5,fetch(O.UPLOAD_FILE,{method:"POST",body:c});case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0.message,e.t0.options);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),this.getUploadedFile=Object(i.a)(Object(s.a)().mark((function e(){var t,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O.GET_UPLOAD_FILE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0.message,e.t0.options);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))})),y=c(6);t.default=function(){var e=Object(u.useState)(0),t=Object(o.a)(e,2),c=t[0],b=t[1],f=Object(u.useState)(null),p=Object(o.a)(f,2),m=p[0],O=p[1],x=Object(u.useState)({}),I=Object(o.a)(x,2),v=I[0],g=I[1],F=Object(u.useState)(!1),B=Object(o.a)(F,2),C=B[0],S=B[1],L=Object(u.useState)({}),T=Object(o.a)(L,2),A=T[0],w=T[1],_=Object(u.useState)({}),k=Object(o.a)(_,2),P=k[0],N=k[1],M=Object(u.useState)({}),E=Object(o.a)(M,2),U=E[0],J=E[1],R=Object(u.useState)([]),G=Object(o.a)(R,2),W=G[0],H=G[1],X=Object(u.useState)(null),K=Object(o.a)(X,2),z=K[0],Y=(K[1],Object(u.useState)([917898118503])),q=Object(o.a)(Y,2),Q=q[0],V=(q[1],Object(u.useState)(h.a)),Z=Object(o.a)(V,2),$=Z[0],ee=(Z[1],Object(u.useState)(null)),te=Object(o.a)(ee,2),ce=(te[0],te[1]);Object(u.useEffect)((function(){var e=document.querySelector(".table-style");if(e){var t=e.offsetWidth;b(t)}}),[]),Object(u.useEffect)((function(){C&&(alert("Two same teachers found in the same row"),S(!1),setTimeout((function(){g({})}),3e3))}),[C]),Object(u.useEffect)((function(){C&&S(!1)}),[C]);var ae=Object(u.useRef)(null),re=["#D4E6F1","#E8DAEF","#008080","#808000","#C39BD3","#76D7C4","#3498DB","#358b79","#847f86","rgb(251, 235, 9)","#CA6F1E","#CCCCFF","#F4D03F","rgb(199, 185, 84)","#979A9A","#F0B27A","rgb(117, 98, 179)","#CD5C5C","#40E0D0","#DAF7A6","#008080","#808000","#FADBD8","green","yellow","white","red","pink"],ne=function(){var e=46656*Math.random()|0,t=46656*Math.random()|0;return(e=("000"+e.toString(36)).slice(-3))+(t=("000"+t.toString(36)).slice(-3))},se=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,c,a,r,n,i,o,u,l,h,b,d,f,p,m;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()(ae.current);case 2:for(t=e.sent,c=t.toDataURL(),ce(c),a=atob(c.split(",")[1]),r=c.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(a.length),i=0;i<a.length;i++)n[i]=a.charCodeAt(i);return o=new Blob([n],{type:r}),u=ne(),l=new File([o],u+".jpg"),h=u+".jpg",e.next=15,(new D).uplaodFile(l);case 15:if("Success"!==e.sent){e.next=36;break}return e.next=19,(new D).getUploadedFile();case 19:if(d=e.sent,!((null===(b=d.Object)||void 0===b?void 0:b.length)>0)){e.next=36;break}f=d.Object.reverse().find((function(e){var t;return(null===(t=e.Title)||void 0===t?void 0:t.indexOf(u))>=0})),p=0;case 23:if(!(p<Q.length)){e.next=36;break}return e.prev=24,m=Q[p],e.next=28,(new D).getWattsappApi(f.LongURL,"time table",m,h);case 28:e.next=33;break;case 30:return e.prev=30,e.t0=e.catch(24),e.abrupt("continue",33);case 33:p++,e.next=23;break;case 36:alert("Time table image sent successfully");case 37:case"end":return e.stop()}}),e,null,[[24,30]])})));return function(){return e.apply(this,arguments)}}(),ie=A,oe=function(e,t){if(console.log(t),console.log("drag cell key",m),m){var c,s=U[m],i=U[t];J(Object(n.a)(Object(n.a)({},U),{},(c={},Object(r.a)(c,m,i),Object(r.a)(c,t,s),c))),O(null)}else{var o=U;U[t]=ie.current,J(Object(n.a)({},o)),w({});var u=P;u[ie.current.teacher]?u[ie.current.teacher]+=1:u[ie.current.teacher]=1,N(Object(n.a)({},u)),function(e){var t=e.split("_")[0],c=[];for(var a in U)a.startsWith(t)&&c.push({key:a,teacher:U[a].teacher});var r=c.reduce((function(e,t){return e[t.teacher]?e[t.teacher].push(t.key):e[t.teacher]=[t.key],e}),{}),n=Object.values(r).filter((function(e){return e.length>1})).flat();!Object.keys(v).includes(e)&&n.includes(e)&&(S(!0),g(n.reduce((function(e,t){return e[t]=!0,e}),{})))}(t);var l=U[t],b=t.split("_")[1],j=t.split("_")[0],d=h.a.find((function(e){return e.BatchID==b}));console.log("xxxx xx xx teacher ",l),console.log("xxxx xx xx batchId ",b),console.log("xxxx xx xx lectureId",j),console.log("xxxx xx xx teacherAssignment",U);var f=h.c.find((function(e){return e.LectureID==j})),p={ID:"0",TimeTableID:"0",LectureName:""};p.Batch=d,p.Lecture=f,p.Subject=l.subject,p.FacultyID=l.FacultyID,p.IsActive=!0,p.CreatedByUserID="1",p.CreatedOnDate="02/05/2023",console.log("fff",p);var D=W;D.push(p),H(Object(a.a)(D))}},ue=function(e){for(var t=e.target;t&&(!t.classList||!t.classList.contains("each-block"));)t=t.parentNode;if(t&&""!==t.innerText.trim())return!1;e.preventDefault()};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"bg-container",children:[Object(y.jsx)("h1",{className:"heading-style",children:"CLASS SCHEDULE"}),Object(y.jsxs)("div",{className:"button-group added-style",children:[Object(y.jsx)(d.e,{className:"btn ",color:"info",children:"Add Batches"}),z,Object(y.jsx)(d.e,{className:"btn",color:"info",children:"Add Teachers"}),Object(y.jsx)(d.e,{className:"btn",color:"info",onClick:function(){var e=new Headers;e.append("Content-Type","application/json");var t=JSON.stringify({TimeTableID:0,Description:"time table save",DateType:"single",FromDate:"12/05/2023",ToDate:"15/05/2023",ShiftID:1,SessionID:5,Session:"string",BatchID:[1,2,3,4,5,6,7,8,9,10,11,12,13,14],LectureID:[1,2,3,4,5,6,7,8],IsActive:!0,CreatedByUserID:1,CreatedOnDate:"09/05/2023",LectureList:W});fetch("https://api.aayamcareerinstitute.co.in/api/AddUpdateTimeTable",{method:"POST",headers:e,body:t,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))},children:"Save"}),Object(y.jsx)(d.e,{className:"btn",color:"info",onClick:se,children:"Post"})]}),Object(y.jsx)("div",{children:Object(y.jsx)("div",{ref:ae,children:Object(y.jsx)("table",{className:"table-style",children:Object(y.jsxs)("tbody",{children:[Object(y.jsx)("div",{className:"for-time",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"F-style time-style",children:"Time"}),h.a.map((function(e){return Object(y.jsx)("td",{className:"F-style batch-style",children:e.Batch},h.a.BatchID)}))]})}),Object(y.jsx)("tr",{children:h.c.map((function(e){return Object(y.jsxs)("div",{children:[Object(y.jsxs)("td",{className:"F-style time-style",children:[e.Time_From,"-",e.Time_To]}),$.map((function(t){var c,a,r,s,i=e.LectureID+"_"+t.BatchID;return Object(y.jsx)("td",{draggable:!0,onDragOver:ue,onDrop:function(e){return oe(0,i)},onDragStart:function(e){return U[i]&&function(e,t){O(t)}(0,i)},id:i,className:"each-block ".concat(v[i]?"blink":""),style:{backgroundColor:null===(c=U[i])||void 0===c?void 0:c.color},children:U[i]&&Object(y.jsxs)("div",{className:"teacname-cross-style ".concat(null===(a=U[i])||void 0===a?void 0:a.className," "),children:[Object(y.jsx)("div",{className:"teacher-name",children:null===(r=U[i])||void 0===r?void 0:r.teacher}),Object(y.jsx)("div",{className:"cross-btn-container",children:null!==(s=U[i])&&void 0!==s&&s.teacher?Object(y.jsx)("button",{className:"cross-style",onClick:function(){return function(e){var t=U;J(Object(n.a)({},t)),w({});var c=P;c[U[e].teacher]-=1,delete U[e].teacher,delete U[e].color,N(c)}(i)},children:Object(y.jsx)(l.a,{})}):""})]})},i)}))]})}))})]})})})}),Object(y.jsx)("div",{className:"teacher-container",style:{maxWidth:c},children:h.b.map((function(e,t){e.FacultyID;var a=e.Faculty;return Object(y.jsxs)("div",{style:{maxWidth:c,backgroundColor:re[t%re.length]},className:"teacher-item",draggable:!0,onDragStart:function(e){return c={teacher:a,color:re[t%re.length]},ie.current=c,void console.log(c);var c},children:[Object(y.jsx)("h3",{children:a}),P[a]>0&&Object(y.jsx)("span",{className:"counter-item ",draggable:!1,children:P[a]})]},a)}))})]})})}}}]);
//# sourceMappingURL=8.a658ebcb.chunk.js.map