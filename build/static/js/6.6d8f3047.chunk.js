(this["webpackJsonpstarter-bt5"]=this["webpackJsonpstarter-bt5"]||[]).push([[6],{30:function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return s})),c.d(t,"c",(function(){return r}));c(36);const a=[{FacultyID:22,Faculty:"MYK",subject:"Physics"},{FacultyID:3038,Faculty:"KPS",subject:"Chemistry"},{FacultyID:3051,Faculty:"MAS",subject:"Physics"},{FacultyID:3050,Faculty:"RSS",subject:"Physics"},{FacultyID:25,Faculty:"NMS",subject:"Biology"},{FacultyID:3037,Faculty:"HDS",subject:"Chemistry"},{FacultyID:3032,Faculty:"MNM",subject:"Biology"},{FacultyID:1023,Faculty:"SJ",subject:"Biology"},{FacultyID:1025,Faculty:"AJ",subject:"Biology"},{FacultyID:1026,Faculty:"DMPS",subject:"Chemistry"},{FacultyID:1027,Faculty:"PSJ",subject:"Physics"},{FacultyID:3033,Faculty:"YBS",subject:"Biology"},{FacultyID:3030,Faculty:"AKS",subject:"Chemistry"},{FacultyID:2028,Faculty:"AMS",subject:"Maths"},{FacultyID:3031,Faculty:"NDS",subject:"Physics"},{FacultyID:3052,Faculty:"HWS",subject:"Physics"},{FacultyID:1029,Faculty:"JRS",subject:"Chemistry"},{FacultyID:3053,Faculty:"HTS",subject:"Chemistry"},{FacultyID:3054,Faculty:"NPS",subject:"Chemistry"},{FacultyID:3059,Faculty:"SKS",subject:"Biology"},{FacultyID:3056,Faculty:"AMK",subject:"Biology"},{FacultyID:3058,Faculty:"DPS",subject:"Chemistry"}],s=[{BatchID:1,Batch:"A1",CourseID:3},{BatchID:2,Batch:"B1",CourseID:2},{BatchID:3,Batch:"C1",CourseID:1},{BatchID:6,Batch:"A2",CourseID:3},{BatchID:7,Batch:"A4",CourseID:3},{BatchID:10,Batch:"A3",CourseID:3},{BatchID:15,Batch:"C2",CourseID:1},{BatchID:20,Batch:"JO1",CourseID:13},{BatchID:22,Batch:"JXII-1",CourseID:12},{BatchID:3042,Batch:"JXI-1",CourseID:11},{BatchID:3049,Batch:"B2",CourseID:2},{BatchID:3061,Batch:"JXI-2",CourseID:11},{BatchID:3078,Batch:"JEE adv",CourseID:13},{BatchID:3079,Batch:"JEE XL",CourseID:1025}],r=[{LectureID:1,Lecture:"L1",Time_From:"08:30 AM",Time_To:"09:45 AM"},{LectureID:2,Lecture:"L2",Time_From:"09:50 AM",Time_To:"11:05 AM"},{LectureID:3,Lecture:"L3",Time_From:"11:20 AM",Time_To:"12:35 PM"},{LectureID:4,Lecture:"L4",Time_From:"12:40 PM",Time_To:"01:55 PM"},{LectureID:5,Lecture:"L5",Time_From:"02:00 PM",Time_To:"03:15 PM"},{LectureID:6,Lecture:"L6",Time_From:"03:20 PM",Time_To:"04:35 PM"},{LectureID:7,Lecture:"L7",Time_From:"04:50 PM",Time_To:"06:05 PM"},{LectureID:8,Lecture:"L8",Time_From:"06:15 PM",Time_To:"07:30 PM"}]},31:function(e,t,c){"use strict";c.d(t,"a",(function(){return a}));class a{}a.emit=e=>{const t=new CustomEvent("spinner-load",{detail:e});window.dispatchEvent(t)}},32:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));const a="https://api.aayamcareerinstitute.co.in/api",s={UPLOAD_FILE:a+"/UploadFilesAttachment",GET_UPLOAD_FILE_URL:a+"/GetFiles",GET_SAVE_TIMETABLE_URL:a+"/AddUpdateTimeTable",GET_ALL_TT:a+"/GetTimeTable",GET_EDIT_TT:a+"/GetTimeTableByDate",REMOVE_TT:a+"/DeleteTimeTable"}},37:function(e,t,c){},38:function(e,t,c){"use strict";var a=c(1),s=(c(30),c(9)),r=(c(39),c(5));t.a=e=>{let{showModal:t,setShowModal:c,teacherList:n}=e;Object(a.useEffect)((()=>{if(t){(async()=>{try{const e=await fetch("https://api.aayamcareerinstitute.co.in/api/GetMasterData"),t=await e.json();u(t)}catch(e){}})()}}),[t]);const[i,o]=Object(a.useState)(n),[l,u]=Object(a.useState)({}),[h,d]=Object(a.useState)({}),[j,m]=Object(a.useState)(""),[b,y]=Object(a.useState)(!1),{Object:p={}}=l,{Batch:D=[],FacultyList:O=[],UserList:x=[]}=p,f={};x.forEach((e=>{f[e.UserID]=e.UserName}));const I=e=>{const{name:t,checked:c}=e.target;d({...h,[t]:c})},g=O.map((e=>({...e,Faculty:f[e.FacultyID]||e.Faculty}))),F=()=>{c(!1)};return Object(r.jsx)("div",{children:Object(r.jsxs)(s.A,{isOpen:t,toggle:F,centered:!0,children:[Object(r.jsx)(s.D,{toggle:F,children:"Select Teachers from the list"}),Object(r.jsxs)(s.B,{children:[j,Object(r.jsx)("div",{className:"batch-list-container",style:{maxHeight:"300px",overflowY:"scroll",maxWidth:"300px"},children:Object(r.jsx)("ul",{className:"batch-list",style:{listStyle:"none"},children:g.map((e=>{const{FacultyID:t,bgColor:c,className:a}=e,s=x.find((e=>e.UserID===t)),n=s?s.UserName:e.Faculty;return Object(r.jsx)("li",{children:Object(r.jsxs)("div",{className:"add-faculty-style",children:[Object(r.jsx)("input",{type:"checkbox",name:e.FacultyID,checked:h[e.FacultyID]||!1,onChange:I,className:"addfaculty-checkbox-style"}),n]})},e.FacultyID)}))})})]}),Object(r.jsxs)(s.C,{children:[Object(r.jsx)(s.e,{color:"primary",onClick:()=>{const e=n;for(const t in h)if(h[t]){const c=g.find((e=>e.FacultyID===parseInt(t)));if(c){const t=x.find((e=>e.UserID===c.FacultyID)),a=t?t.UserName:c.Faculty;e.some((e=>e.FacultyID===c.FacultyID))||e.push({FacultyID:c.FacultyID,Faculty:a})}}o(e),b||(m(Object(r.jsx)(s.K,{color:"success",fade:!1,children:"Teachers added successfully"})),setTimeout((()=>{y(!1),m("")}),3e3)),F()},children:"Add"})," ",Object(r.jsx)(s.e,{color:"secondary",onClick:F,children:"Close"})]})]})})}},39:function(e,t,c){},40:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var a=c(31),s=c(32);class r{constructor(){this.getTtList=async()=>{try{a.a.emit(!0);const e=await fetch(s.a.GET_ALL_TT,{method:"GET"}),t=await e.json();return a.a.emit(!1),t}catch(e){throw a.a.emit(!1),new Error(e.message,e.options)}},this.getEditTt=async e=>{try{a.a.emit(!0);const t=new Headers;t.append("Content-Type","application/json");const c=await fetch(s.a.GET_EDIT_TT,{method:"POST",headers:t,body:JSON.stringify({FromDate:e.replaceAll("-","/")})}),r=await c.json();return a.a.emit(!1),r}catch(t){throw a.a.emit(!1),new Error(t.message,t.options)}},this.addUpdateTt=async e=>{try{a.a.emit(!0);const t=new Headers;t.append("Content-Type","application/json");const c=await fetch(s.a.GET_SAVE_TIMETABLE_URL,{method:"POST",headers:t,body:JSON.stringify(e)}),r=await c.json();return a.a.emit(!1),r}catch(t){throw a.a.emit(!1),new Error(t.message,t.options)}},this.removeTtById=async e=>{try{a.a.emit(!0);const t=new Headers;t.append("Content-Type","application/json");const c=await fetch(s.a.REMOVE_TT,{method:"POST",headers:t,body:e}),r=await c.json();return a.a.emit(!1),r}catch(t){throw a.a.emit(!1),new Error(t.message,t.options)}}}}},41:function(e,t,c){"use strict";c.r(t);var a=c(1),s=(c(30),c(9)),r=(c(37),c(5));t.default=e=>{let{showModal:t,setShowModal:c,batchList:n}=e;Object(a.useEffect)((()=>{if(t){(async()=>{try{const e=await fetch("https://api.aayamcareerinstitute.co.in/api/GetMasterData"),t=await e.json();u(t)}catch(e){}})()}}),[t]);const[i,o]=Object(a.useState)(n),[l,u]=Object(a.useState)({}),[h,d]=Object(a.useState)({}),[j,m]=Object(a.useState)(""),[b,y]=Object(a.useState)(!1),{Object:p={}}=l,{Batch:D=[]}=p,O=e=>{const{name:t,checked:c}=e.target;d({...h,[t]:c})},x=()=>{c(!1)};return Object(r.jsx)("div",{children:Object(r.jsxs)(s.A,{centered:!0,isOpen:t,toggle:x,children:[Object(r.jsx)(s.D,{toggle:x,children:"Select Batches from the list"}),Object(r.jsxs)(s.B,{children:[j,Object(r.jsx)("div",{className:"batch-list-container",style:{maxHeight:"300px",overflowY:"scroll",maxWidth:"300px"},children:Object(r.jsx)("ul",{className:"batch-list",style:{listStyle:"none"},children:D.map((e=>Object(r.jsx)("li",{children:Object(r.jsxs)("div",{className:"add-batch-style",children:[Object(r.jsx)("input",{type:"checkbox",name:e.BatchID,checked:h[e.BatchID]||!1,onChange:O,className:"addbatch-checkbox-style"}),e.Batch]})},e.BatchID)))})})]}),Object(r.jsxs)(s.C,{children:[Object(r.jsx)(s.e,{color:"primary",onClick:()=>{const e=n;for(const t in h)if(h[t]){const c=D.find((e=>e.BatchID===parseInt(t)));c&&!e.find((e=>e.BatchID===c.BatchID))&&e.push({BatchID:c.BatchID,Batch:c.Batch,CourseID:c.CourseID})}o(e),b||(m(Object(r.jsx)(s.K,{color:"success",fade:!1,children:"Batches added successfully"})),setTimeout((()=>{y(!1),m("")}),3e3)),x()},children:"Add"})," ",Object(r.jsx)(s.e,{color:"secondary",onClick:x,children:"Close"})]})]})})}},44:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var a=c(31),s=c(32);class r{constructor(){this.getWattsappApi=async(e,t,c,s)=>{try{a.a.emit(!0);const r=await fetch("https://ziper.io/api/send.php?"+new URLSearchParams({number:c,type:"media",message:t,media_url:"https://api.aayamcareerinstitute.co.in/"+e,filename:s,instance_id:"647B3C9AA8D0A",access_token:"0a3e27126c2c239bdf7f9128943ef9c0"}),{method:"GET"}),n=await r.json();return a.a.emit(!1),n}catch(r){throw a.a.emit(!1),new Error(r.message,r.options)}},this.getWattsappGroupApiTeachers=async(e,t,c)=>{try{a.a.emit(!0);const s=await fetch("https://ziper.io/api/sendgroupmsg.php?"+new URLSearchParams({group_id:"919977116612-1595572006@g.us",type:"media",message:t,media_url:"https://api.aayamcareerinstitute.co.in/"+e,filename:c,instance_id:"647B3C9AA8D0A",access_token:"0a3e27126c2c239bdf7f9128943ef9c0"}),{method:"GET"}),r=await s.json();return a.a.emit(!1),r}catch(s){throw a.a.emit(!1),new Error(s.message,s.options)}},this.getWattsappGroupApiOthers=async(e,t,c)=>{try{a.a.emit(!0);const s=await fetch("https://ziper.io/api/sendgroupmsg.php?"+new URLSearchParams({group_id:"919826362001-1628170376@g.us",type:"media",message:t,media_url:"https://api.aayamcareerinstitute.co.in/"+e,filename:c,instance_id:"647B3C9AA8D0A",access_token:"0a3e27126c2c239bdf7f9128943ef9c0"}),{method:"GET"}),r=await s.json();return a.a.emit(!1),r}catch(s){throw a.a.emit(!1),new Error(s.message,s.options)}},this.uplaodFile=async e=>{try{a.a.emit(!0);const t=new FormData;t.append("file",e,e.name);const c=await fetch(s.a.UPLOAD_FILE,{method:"POST",body:t}),r=await c.json();return a.a.emit(!1),r}catch(t){throw a.a.emit(!1),new Error(t.message,t.options)}},this.getUploadedFile=async()=>{try{a.a.emit(!0);const e=await fetch(s.a.GET_UPLOAD_FILE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();return a.a.emit(!1),t}catch(e){throw a.a.emit(!1),new Error(e.message,e.options)}}}}},58:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c(52),r=c(30),n=(c(58),c(51)),i=c.n(n),o=c(9),l=c(41),u=c(44),h=c(38),d=c(40),j=c(5);t.default=()=>{const[e,t]=Object(a.useState)(0),[c,n]=Object(a.useState)(null),[m,b]=Object(a.useState)({}),[y,p]=Object(a.useState)(!1),[D,O]=Object(a.useState)({}),[x,f]=Object(a.useState)({}),[I,g]=Object(a.useState)({}),[F,T]=Object(a.useState)([]),[w,S]=Object(a.useState)(null),[B,C]=Object(a.useState)([917898118503]),[L,A]=Object(a.useState)(r.a),[E,_]=Object(a.useState)(null),[v,N]=Object(a.useState)(!1),[M,P]=Object(a.useState)(!1),[k,U]=Object(a.useState)(""),[G,J]=Object(a.useState)("");Object(a.useEffect)((()=>{const e=document.querySelector(".table-style");if(e){const c=e.offsetWidth;t(c)}}),[]),Object(a.useEffect)((()=>{y&&(alert("Two same teachers found in the same row"),p(!1),setTimeout((()=>{b({})}),3e3))}),[y]),Object(a.useEffect)((()=>{y&&p(!1)}),[y]);const R=Object(a.useRef)(null),W=["#D4E6F1","#E8DAEF","#008080","#808000","#C39BD3","#76D7C4","#3498DB","#358b79","#847f86","rgb(251, 235, 9)","#CA6F1E","#CCCCFF","#F4D03F","rgb(199, 185, 84)","#979A9A","#F0B27A","rgb(117, 98, 179)","#CD5C5C","#40E0D0","#DAF7A6","#008080","#808000","#FADBD8","green","yellow","white","red","pink"],z=D,H=(e,t)=>{if(console.log(t),console.log("jjjjj",I),console.log("drag cell key",c),c){const e=I[c],a=I[t];g({...I,[c]:a,[t]:e}),n(null)}else{const e=I;I[t]=z.current,g({...e}),O({});const c=x;c[z.current.teacher]?c[z.current.teacher]+=1:c[z.current.teacher]=1,f({...c}),(e=>{const t=e.split("_")[0],c=[];for(const r in I)r.startsWith(t)&&c.push({key:r,teacher:I[r].teacher});const a=c.reduce(((e,t)=>(e[t.teacher]?e[t.teacher].push(t.key):e[t.teacher]=[t.key],e)),{}),s=Object.values(a).filter((e=>e.length>1)).flat();!Object.keys(m).includes(e)&&s.includes(e)&&(p(!0),b(s.reduce(((e,t)=>(e[t]=!0,e)),{})))})(t);const a=I[t],s=t.split("_")[1],n=t.split("_")[0],i=a.teacher,o=r.a.find((e=>e.BatchID==s));console.log("xxxx xx xx teacher ",a),console.log("xxxx xx xx batchId ",s),console.log("xxxx xx xx lectureId",n),console.log("xxxx xx xx teacherAssignment",I);const l=r.c.find((e=>e.LectureID==n)),u=r.b.find((e=>e.Faculty==i));console.log("iiii",u);const h={ID:"0",TimeTableID:"0",LectureName:""};h.Batch=o,h.Lecture=l,h.Subject=u.subject,h.FacultyID=u.FacultyID,h.IsActive=!0,h.CreatedByUserID="1",h.CreatedOnDate="02/05/2023",console.log("fff",h),console.log("zzzz",a);const d=F;d.push(h),T([...d])}},K=e=>{let t=e.target;for(;t&&(!t.classList||!t.classList.contains("each-block"));)t=t.parentNode;if(t&&""!==t.innerText.trim())return!1;e.preventDefault()};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"bg-container",children:[Object(j.jsx)("h1",{className:"heading-style",children:"CLASS SCHEDULE"}),Object(j.jsxs)("div",{className:"button-group added-style",children:[Object(j.jsx)(o.e,{className:"btn ",color:"info",onClick:()=>{N(!0)},children:"Add Batches"}),v&&Object(j.jsx)(l.default,{showModal:v,setShowModal:N}),w,Object(j.jsx)(o.e,{className:"btn",color:"info",onClick:()=>{P(!0)},children:"Add Teachers"}),M&&Object(j.jsx)(h.a,{showModal:M,setShowModal:P}),Object(j.jsx)(o.e,{className:"btn",color:"info",onClick:async()=>{await(new d.a).saveTt(k,G,F);alert("time table saved successfully")},children:"Save"}),Object(j.jsx)(o.e,{className:"btn",color:"info",onClick:async()=>{const e=(await i()(R.current)).toDataURL();_(e);const t=atob(e.split(",")[1]),c=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(t.length);for(let i=0;i<t.length;i++)a[i]=t.charCodeAt(i);const s=new Blob([a],{type:c}),r=(()=>{var e=46656*Math.random()|0,t=46656*Math.random()|0;return(e=("000"+e.toString(36)).slice(-3))+("000"+t.toString(36)).slice(-3)})(),n=new File([s],r+".jpg"),o=r+".jpg";if("Success"===await(new u.a).uplaodFile(n)){var l;const e=await(new u.a).getUploadedFile();if((null===(l=e.Object)||void 0===l?void 0:l.length)>0){const t=e.Object.reverse().find((e=>{var t;return(null===(t=e.Title)||void 0===t?void 0:t.indexOf(r))>=0}));try{await(new u.a).getWattsappGroupApiOthers(t.LongURL,"time table",o)}catch(h){console.log("error")}try{await(new u.a).getWattsappGroupApiTeachers(t.LongURL,"time table",o)}catch(h){console.log("error")}}}alert("Time table image sent successfully")},children:"Post"})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{ref:R,children:[Object(j.jsx)("br",{}),Object(j.jsx)(o.t,{children:Object(j.jsxs)("div",{className:"time-table-date-style",children:[Object(j.jsxs)(o.u,{className:"label-date-allignment",children:[Object(j.jsx)("p",{children:"From:"}),Object(j.jsx)(o.w,{id:"fromDate",name:"date",type:"date",onChange:e=>{(e=>{U(e.target.value)})(e)},className:"input-size"})]}),Object(j.jsxs)(o.u,{className:"label-date-allignment",children:[Object(j.jsx)("p",{children:"To:"}),Object(j.jsx)(o.w,{id:"toDate",name:"date",type:"date",onChange:e=>{(e=>{J(e.target.value)})(e)},className:"input-size"})]})]})}),Object(j.jsx)("table",{className:"table-style",children:Object(j.jsxs)("tbody",{children:[Object(j.jsx)("div",{className:"for-time",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"F-style time-style",children:"Time"}),r.a.map((e=>Object(j.jsx)("td",{className:"F-style batch-style",children:e.Batch},r.a.BatchID)))]})}),Object(j.jsx)("tr",{children:r.c.map((e=>Object(j.jsxs)("div",{children:[Object(j.jsxs)("td",{className:"F-style time-style",children:[e.Time_From,"-",e.Time_To]}),L.map((t=>{var c,a,r,i;const o=e.LectureID+"_"+t.BatchID;return Object(j.jsx)("td",{draggable:!0,onDragOver:K,onDrop:e=>H(0,o),onDragStart:e=>I[o]&&((e,t)=>{n(t)})(0,o),id:o,className:"each-block ".concat(m[o]?"blink":""),style:{backgroundColor:null===(c=I[o])||void 0===c?void 0:c.color},children:I[o]&&Object(j.jsxs)("div",{className:"teacname-cross-style ".concat(null===(a=I[o])||void 0===a?void 0:a.className," "),children:[Object(j.jsx)("div",{className:"teacher-name",children:null===(r=I[o])||void 0===r?void 0:r.teacher}),Object(j.jsx)("div",{className:"cross-btn-container",children:null!==(i=I[o])&&void 0!==i&&i.teacher?Object(j.jsx)("button",{className:"cross-style",onClick:()=>(e=>{g({...I}),O({});const t=x;t[I[e].teacher]-=1,delete I[e].teacher,delete I[e].color,f(t)})(o),children:Object(j.jsx)(s.a,{})}):""})]})},o)}))]})))})]})}),Object(j.jsx)("br",{})]})}),Object(j.jsx)("div",{className:"teacher-container",style:{maxWidth:e},children:r.b.map(((t,c)=>{const{FacultyID:a,Faculty:s}=t;return Object(j.jsxs)("div",{style:{maxWidth:e,backgroundColor:W[c%W.length]},className:"teacher-item",draggable:!0,onDragStart:e=>{return t={teacher:s,color:W[c%W.length]},z.current=t,void console.log(t);var t},children:[Object(j.jsx)("h3",{children:s}),x[s]>0&&Object(j.jsx)("span",{className:"counter-item ",draggable:!1,children:x[s]})]},a)}))})]})})}}}]);
//# sourceMappingURL=6.6d8f3047.chunk.js.map